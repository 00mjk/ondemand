<% case quota.resource_type; when "file"; resource_title = "number of files"; when "block"; resource_title = "disk size"; end %>
<h4>
  Nearing <%= resource_title %> limit for
  <%= link_to OodAppkit.files.url(path: quota.path).to_s, class: "text-danger", target: "_blank" do -%>
    <strong><%= quota.path %></strong>
  <%- end -%>
  <small class="pull-right">
    Updated <%= time_ago_in_words(quota.updated_at) %> ago
  </small>
</h4>
<ul class="list-unstyled">
  <li>
    Consider deleting or archiving files to free up disk space.
  </li>
  <% case quota.resource_type
     when "file" %>
  <li>
    Current usage:
    <strong><%= number_to_human(quota.total_usage).downcase %></strong>
    <%- if quota.shared? -%>
      (<%= number_to_human(quota.user_usage).downcase %> is yours)
    <%- end -%>
    &mdash;
    Total <%= resource_title %> allowed:
    <strong><%= number_to_human(quota.limit).downcase %></strong>
  </li>
  <% when "block" %>
  <li>
    Current usage:
    <strong><%= number_to_human_size(quota.total_usage * Configuration.block_size) %></strong>
    <%- if quota.shared? -%>
      (<%= number_to_human_size(quota.user_usage * Configuration.block_size) %> is yours)
    <%- end -%>
    &mdash;
    Total <%= resource_title %> allowed:
    <strong><%= number_to_human_size(quota.limit * Configuration.block_size) %></strong>
  </li>
  <% end %>
  <li>
    <%=
      render(
        partial: "shared/insufficient_quota_progress_bar",
        locals: { percent: quota.percent_total_usage }
      )
    %>
  </li>
</ul>

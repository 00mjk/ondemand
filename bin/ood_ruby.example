#!/bin/env bash

# Open OnDemand Ruby wrapper script
#
# The purpose of this script is to wrap up the necessary environment for the
# per-user NGINX (PUN) processes to run under. The PUN requires the following
# software in its environment:
#
# - nginx 1.6
# - passenger 4.0
# - ruby 2.2
# - node.js 0.10
# - git 1.9
#

# If the necessary libraries and PATH environment variable are loaded by
# default in a sudo environment, then no modifications are necessary to this
# file.

# Check if using RHEL 6 with Software Collections 2.0
#
SCL_SOURCE=$(command -v scl_source)
[[ $SCL_SOURCE  ]] && source ${SCL_SOURCE} enable nginx16 rh-passenger40 rh-ruby22 nodejs010 git19

# Use default environment
#
exec /bin/env ruby "$@"

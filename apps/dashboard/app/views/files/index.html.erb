<h2>files index page</h2>

<ol class="breadcrumb">
  <% @path.descend do |f| %>
  <li>
    <%= link_to f.basename, files_path(f) %>
  </li>
  <% end %>
</ol>

<table class="table table-striped" id="directory-contents">
  <thead>
    <tr>
      <th>Type</th>
      <th>Name</th>
      <th>Size</th>
      <th>Modified at</th>
      <th>Owner</th>
      <th>Mode</th>
    </tr>
  </thead>
  <tbody>
  <% @files.each do |f| %>
    <tr>
      <td><%= f[:directory] ? '<span class="fa fa-folder" style="color: gold"></span>'.html_safe : '<span class="fa fa-file" style="color: lightgrey"></span>'.html_safe %></td>
      <td><%= link_to f[:name], files_path(@path.join(f[:name]).to_s) %></td>
      <td><%= f[:size] %></td>
      <td><%= f[:date] %></td>
      <td><%= f[:owner] %></td>
      <td><%= f[:mode] %></td>
    </tr>
  <% end %>
  </tbody>
</table>

<%# FIXME: problem with not using tables %>
<script>
$('#directory-contents').DataTable({
  paging:false,
  //FIXME: need some mixture of flexbox to control height
  scrollY: '65vh',
  scrollCollapse: true,
  select: {
    style: 'os',
    className: 'selected info',
    toggleable: false
  }
});
</script>
